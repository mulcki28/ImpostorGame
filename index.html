<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mulcki Studios - Imposter Wortspiel</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Permanent+Marker&family=Poppins:wght@400;600;700&family=Comic+Neue:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #6366f1; /* Indigo */
            --primary-dark: #4f46e5;
            --accent-color: #f43f5e; /* Rose */
            --accent-hover: #e11d48;
            --background-color: #1e1e2e; /* Dark background */
            --card-background: #282838;
            --text-color: #f8fafc;
            --text-secondary: #cbd5e1;
            --success-color: #10b981; /* Green */
            --warning-color: #f59e0b; /* Amber */
            --error-color: #ef4444; /* Red */
        }
        
        * {
            box-sizing: border-box;
            transition: all 0.2s ease;
        }
        
        body {
            margin: 0;
            padding: 0;
            font-family: 'Poppins', Arial, sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
            width: 100%;
            box-sizing: border-box;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        
        h1 {
            text-align: center;
            font-family: 'Poppins', sans-serif;
            font-size: 4rem;
            letter-spacing: 2px;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        h2 {
            text-align: center;
            font-family: 'Poppins', sans-serif;
            font-weight: 700;
            color: var(--text-color);
            margin-top: 0;
        }
        
        .game-title {
            font-family: 'Poppins', sans-serif;
            letter-spacing: 1px;
        }
        
        .game-text {
            font-family: 'Comic Neue', cursive;
            font-size: 1.1rem;
        }
        
        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 24px;
            margin: 10px 0;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            font-family: 'Poppins', sans-serif;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.2s ease;
        }
        
        button:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
        }
        
        button:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .error-message {
            color: var(--error-color);
            font-weight: 600;
            margin: 8px 0;
            background-color: rgba(239, 68, 68, 0.1);
            padding: 10px;
            border-radius: 6px;
            border-left: 3px solid var(--error-color);
            font-family: 'Poppins', sans-serif;
        }
        
        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
            margin: 3px;
        }
        
        .btn-icon {
            padding: 8px;
            font-size: 1.2rem;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background-color: var(--accent-color);
        }
        
        .btn-icon:hover {
            background-color: var(--accent-hover);
        }
        
        input, select, textarea {
            padding: 12px;
            margin: 8px 0;
            width: 100%;
            box-sizing: border-box;
            border-radius: 8px;
            border: 2px solid #3d3d56;
            background-color: #2a2a3d;
            color: var(--text-color);
            font-family: 'Poppins', sans-serif;
        }
        
        input:focus, select:focus, textarea:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.3);
        }
        
        textarea {
            min-height: 120px;
            resize: vertical;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
            font-family: 'Poppins', sans-serif;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-secondary);
            font-family: 'Poppins', sans-serif;
        }
        
        #gameScreen {
            display: none;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            padding: 2rem;
            border-radius: 16px;
            height: 100%;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            text-align: center;
        }
        
        #cardScreen {
            display: none;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            padding: 2rem;
            border-radius: 16px;
            text-align: center;
            height: 100%;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
        
        .card {
            background-color: white;
            color: #333;
            padding: 2rem;
            border-radius: 16px;
            margin: 2rem auto;
            max-width: 350px;
            text-align: center;
            cursor: pointer;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            transform-style: preserve-3d;
            transition: transform 0.6s;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 20px rgba(0, 0, 0, 0.3);
        }
        
        .card h3 {
            margin-top: 0;
            color: var(--primary-color);
            font-size: 1.5rem;
        }
        
        .card-content {
            display: none;
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 2px dashed #e2e8f0;
        }
        
        .game-controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 2rem;
        }
        
        #playerNamesList {
            margin-top: 1rem;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .controls-group {
            display: flex;
            align-items: center;
            margin-top: 1rem;
        }
        
        .player-counter {
            margin: 0 1rem;
            font-weight: bold;
            color: var(--text-secondary);
            font-family: 'Poppins', sans-serif;
        }
        
        #setupForm {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            background-color: var(--card-background);
            padding: 2rem;
            border-radius: 16px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        }
        
        #wordSetupDiv {
            flex-grow: 1;
        }
        
        .player-input {
            position: relative;
            margin-bottom: 8px;
        }
        
        .app-header {
            padding: 1rem 0;
            text-align: center;
            background-color: var(--card-background);
            border-bottom: 3px solid var(--primary-color);
            margin-bottom: 2rem;
            border-radius: 0 0 16px 16px;
            font-family: 'Poppins', sans-serif;
        }
        
        .info-text {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-top: 8px;
            font-family: 'Poppins', sans-serif;
        }
        
        .impostor-role {
            color: var(--accent-color);
            font-weight: 700;
            font-size: 1.2rem;
        }
        
        .normal-role {
            color: var(--success-color);
            font-weight: 700;
        }
        
        .word-highlight {
            background-color: var(--primary-color);
            color: white;
            padding: 3px 8px;
            border-radius: 4px;
            font-weight: 700;
        }
        
        .btn-large {
            padding: 14px 28px;
            font-size: 1.1rem;
        }
        
        /* Neuer Stil für den Text während des Spiels */
        #gameScreen p.game-text {
            font-family: 'Poppins', sans-serif;
            font-weight: 700;
            font-size: 1.2rem;
            text-align: center;
            margin-bottom: 2rem;
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 1rem;
            }
            
            h1 {
                font-size: 3rem;
            }
            
            button {
                padding: 10px 20px;
            }
            
            .card {
                padding: 1.5rem;
                margin: 1rem auto;
            }
        }
    </style>
</head>
<body>
    <div class="app-header">
        <h1>Mulcki Studios</h1>
        <h2 class="game-title">Imposter Wortspiel</h2>
    </div>
    
    <div class="container" id="homeScreen">
        <form id="setupForm" onsubmit="return false;">
            <div class="form-group">
                <label for="playerList">Spieler:</label>
                <div id="playerNamesList"></div>
                <div class="controls-group">
                    <button type="button" class="btn-icon" id="addPlayerBtn">+</button>
                    <button type="button" class="btn-icon" id="removePlayerBtn">-</button>
                    <span class="player-counter" id="playerCounter">0 Spieler</span>
                </div>
                <div id="errorPlayerCount" class="error-message" style="display: none;"></div>
            </div>
            
            <div class="form-group">
                <label for="impostorCount">Anzahl der Imposter:</label>
                <div id="impostorOptions">
                    <select id="impostorCount">
                        <option value="1">1 Imposter</option>
                    </select>
                </div>
                <div id="impostorInfo" class="info-text">Die verfügbaren Imposter hängen von der Spieleranzahl ab.</div>
            </div>
            
            <div class="form-group">
                <label for="wordSource">Wörter-Quelle:</label>
                <select id="wordSource">
                    <option value="theme">Thema wählen</option>
                    <option value="custom">Eigene Wörter</option>
                </select>
            </div>
            
            <div class="form-group" id="themeDiv">
                <label for="theme">Thema:</label>
                <select id="theme">
                    <option value="allgemein">Allgemein</option>
                    <option value="bekanntheiten">Bekanntheiten</option>
                    <option value="memes">Memes</option>
                    <option value="geographie">Geographie</option>
                    <option value="deutschland">Deutschland</option>
                </select>
            </div>
            
            <div class="form-group" id="wordSetupDiv" style="display: none;">
                <label for="customWordsText">Eigene Wörter (mit Komma getrennt):</label>
                <textarea id="customWordsText" placeholder="Wort1, Wort2, Wort3..."></textarea>
                <div id="errorCustomWords" class="error-message" style="display: none;"></div>
                <div id="wordCountInfo" class="info-text">0 Wörter eingegeben</div>
            </div>
            
            <button type="button" id="startGameBtn">Spiel starten</button>
        </form>
    </div>
    
    <div class="container" id="cardScreen">
        <h2 class="game-title">Rollenkarten</h2>
        <div class="card" id="playerCard">
            <h3 id="playerName" class="game-text">Spielername</h3>
            <p class="game-text">Tippe auf die Karte, um deine Rolle zu sehen</p>
            <div class="card-content" id="cardContent">
                <p id="roleInfo" class="game-text normal-role">Du bist ein normaler Spieler</p>
                <p id="wordInfo" class="game-text">Dein Wort: <span id="playerWord" class="word-highlight">Wort</span></p>

            </div>
        </div>
        <button type="button" id="nextCardBtn">Nächste Karte</button>
    </div>
    
    <div class="container" id="gameScreen">
        <h2 class="game-title">Spiel läuft</h2>
        <p class="game-text">Findet heraus, wer die IMPOSTER sind!</p>
        
        <div class="game-controls">
            <button type="button" id="endGameBtn">Spiel beenden</button>
            <button type="button" id="restartGameBtn">Spiel neustarten</button>
        </div>
    </div>

    <script>
        // Globale Variablen
        let players = [];
        let impostors = [];
        let normalWord = "";
        let currentPlayerIndex = 0;
        
        // Vordefinierte Wörter nach Themen
        const themeWords = {
            allgemein: ["Abfluss", "Abstellraum", "Akku", "Akzent", "Alarmanlage", "Ampel", "Angel", "Aquarium", "Architekt", "Ausweis",
            "Backpapier", "Bagger", "Balkon", "Bankkarte", "Bauklötze", "Baumarkt", "Baustelle", "Behälter", "Beipackzettel", "Beistelltisch",
            "Beleg", "Bettdecke", "Bettwäsche", "Bildschirm", "Blitz", "Blume", "Bohrmaschine", "Briefkasten", "Brotdose", "Büroklammer",
            "Chips", "Comic", "Currywurst", "Dachboden", "Dampfbad", "Dartscheibe", "Deckel", "Diät", "Drehstuhl", "Drucker",
            "Eierschneider", "Einkaufsliste", "Einrad", "Einwegrasierer", "Eiswürfel", "Ellenbogen", "Erste-Hilfe-Kasten", "Fahrradkette", "Fahrstuhl", "Fensterbank",
            "Fernbedienung", "Feuerzeug", "Filmset", "Filterkaffee", "Fingernagel", "Flaschenöffner", "Fleischwolf", "Flugzeug", "Flur", "Föhn",
            "Fotoalbum", "Fotopapier", "Fragebogen", "Frisbee", "Frittieröl", "Frühstücksei", "Fußmatte", "Garderobe", "Gartenschlauch", "Gaskocher",
            "Geburtstagskarte", "Gebrauchsanweisung", "Geldschein", "Gemüseschneider", "Geschirrspüler", "Geschenkpapier", "Gewürzregal", "Gießkanne", "Gipfel", "Gitarre",
            "Glasreiniger", "Gleitmittel", "Glocke", "Gratwanderung", "Grillzange", "Gürtel", "Gutschein", "Haarbürste", "Haargummi", "Halskette",
            "Handcreme", "Handschuh", "Handtuchhalter", "Hausnummer", "Heizkörper", "Helm", "Hering", "Hinterhof", "Hocker", "Holzboden",
            "Hörgerät", "Hubschrauber", "Hundeleine", "Hüpfburg", "Imbissbude", "Inbusschlüssel", "Insel", "Isomatte", "Jackentasche", "Jalousie",
            "Joystick", "Jugendherberge", "Kabeltrommel", "Kaktus", "Kalender", "Kameraobjektiv", "Kanister", "Karaffe", "Kartenspiel", "Kassenzettel",
            "Katze", "Kaugummiautomat", "Keksdose", "Kerze", "Kette", "Kicker", "Kinderwagen", "Kiste", "Klammeraffe", "Klebeband",
            "Kleidungsstück", "Klingel", "Klopapier", "Knetmasse", "Knopf", "Kochfeld", "Kochlöffel", "Kopfhörer", "Korkenzieher", "Kosmetikspiegel",
            "Kräutermischung", "Kreditkarte", "Kugelschreiber", "Kühltasche", "Kühlschrank", "Kunststoff", "Ladekabel", "Lagerfeuer", "Lampe", "Laterne",
            "Latzhose", "Lautsprecher", "Lebensmittel", "Leiter", "Lichterkette", "Lineal", "Lippenstift", "Locher", "Luftballon", "Luftmatratze",
            "Luftreiniger", "Lüftung", "Magnet", "Mahlzeit", "Malbuch", "Malpinsel", "Markise", "Matratze", "Mausefalle", "Medikament",
            "Messerblock", "Metzgerei", "Mikroskop", "Milchkanne", "Milchzahndose", "Mindesthaltbarkeitsdatum", "Mixer", "Möbelstück", "Müllbeutel", "Mülltonne",
            "Münzautomat", "Mütze", "Nagellack", "Nähmaschine", "Nasenspray", "Notizbuch", "Nudelholz", "Ohrhörer", "Ofenhandschuh", "Ordnerrücken",
            "Packpapier", "Paket", "Papierflieger", "Papierkorb", "Parfümflasche", "Passwort", "Pausenbrot", "Pendel", "Pflaster", "Pflaume",
            "Pinsel", "Plastiktüte", "Poster", "Pudding", "Putzmittel", "Puzzleteil", "Quittung", "Rasierapparat", "Rasierschaum", "Rathaus",
            "Rechnung", "Regenjacke", "Reisepass", "Reißverschluss", "Riegel", "Rutschbahn", "Sattel", "Scanner", "Schaufel", "Scheibe",
            "Schere", "Schlafsack", "Schlüsselanhänger", "Schmuckkästchen", "Schneebesen", "Schokoladenstück", "Schraubenzieher", "Schreibtischlampe", "Schuhlöffel", "Schultasche",
            "Seifenspender", "Seitenstreifen", "Selbstbedienung", "Serviette", "Shampooflasche", "Sicherheitsnadel", "Sieb", "Sofa", "Sonnenbrille", "Spardose",
            "Spiegelbild", "Spielkarte", "Spielkonsole", "Spitzname", "Spraydose", "Sprungbrett", "Stabmixer", "Stadtplan", "Staubsauger", "Steckdose",
            "Stehlampe", "Sternschnuppe", "Stichwort", "Stofftier", "Stoppschild", "Strohhalm", "Strumpfhose", "Suppenkelle", "Tablet", "Taschenlampe",
            "Tastatur", "Teebeutel", "Teelicht", "Telefonbuch", "Thermometer", "Toaster", "Tontopf", "Trampolin", "Treppe", "Trittleiter",
            "Trompete", "Tropfen", "Tupperdose", "Türrahmen", "Umschlag", "Unterschrift", "Verlängerungskabel", "Videospiel", "Wackelzahn", "Wandtattoo",
            "Wasserfilter", "Wasserkocher", "Wasserpistole", "Wäscheklammer", "Wattestäbchen", "Wegbeschreibung", "Weinglas", "Werkzeugkasten", "Windmühle", "Winkelmesser",
            "Wohnmobil", "Würfel", "Zahnbürstenhalter", "Zahnarztstuhl", "Zahnspange", "Zange", "Zeitung", "Zelt", "Zimmerpflanze", "Zuckerdose"],
            bekanntheiten: ["Michael Jackson (Sänger)", "Eminem (Rapper)", "The Rock (Schauspieler)", "Beyoncé (Sängerin)",
            "Rihanna (Sängerin)", "Taylor Swift (Sängerin)", "Ed Sheeran (Sänger)", "Ariana Grande (Sängerin)",
            "Lady Gaga (Sängerin)", "Justin Bieber (Sänger)", "Snoop Dogg (Rapper)", "Drake (Rapper)",
            "Shakira (Sängerin)", "Billie Eilish (Sängerin)", "Elvis Presley (Sänger)", "Madonna (Sängerin)",
            "Freddie Mercury (Queen)", "Katy Perry (Sängerin)", "Bruno Mars (Sänger)", "Post Malone (Rapper)",

            "Johnny Depp (Schauspieler)", "Leonardo DiCaprio (Schauspieler)", "Will Smith (Schauspieler)", "Angelina Jolie (Schauspielerin)",
            "Brad Pitt (Schauspieler)", "Tom Cruise (Schauspieler)", "Keanu Reeves (Schauspieler)", "Morgan Freeman (Schauspieler)",
            "Robert Downey Jr. (Schauspieler)", "Chris Hemsworth (Schauspieler)", "Scarlett Johansson (Schauspielerin)",
            "Jack Black (Schauspieler)", "Jim Carrey (Schauspieler)", "Emma Watson (Schauspielerin)", "Daniel Radcliffe (Schauspieler)",

            "Harry Potter (Harry Potter)", "Hermine (Harry Potter)", "Ron (Harry Potter)", "Dumbledore (Harry Potter)",
            "Voldemort (Harry Potter)", "Hogwarts (Harry Potter)",

            "Spider-Man (Marvel)", "Iron Man (Marvel)", "Hulk (Marvel)", "Captain America (Marvel)", "Black Panther (Marvel)",
            "Thor (Marvel)", "Loki (Marvel)", "Deadpool (Marvel)", "Wolverine (Marvel)", "Avengers (Marvel)",

            "Batman (DC)", "Superman (DC)", "Joker (DC)", "Wonder Woman (DC)",

            "Darth Vader (Star Wars)", "Yoda (Star Wars)", "Luke Skywalker (Star Wars)", "Leia (Star Wars)",
            "Stormtrooper (Star Wars)", "R2-D2 (Star Wars)", "C-3PO (Star Wars)", "Obi-Wan Kenobi (Star Wars)",

            "Minions (Ich – Einfach unverbesserlich)", "Gru (Ich – Einfach unverbesserlich)",
            "Olaf (Frozen)", "Elsa (Frozen)", "Anna (Frozen)", "Shrek (Shrek)", "Donkey (Shrek)",
            "Simba (König der Löwen)", "Mufasa (König der Löwen)", "Scar (König der Löwen)",

            "SpongeBob (SpongeBob Schwammkopf)", "Patrick (SpongeBob Schwammkopf)",
            "Mario (Super Mario)", "Luigi (Super Mario)", "Bowser (Super Mario)",
            "Pikachu (Pokémon)", "Charizard (Pokémon)",

            "Buzz Lightyear (Toy Story)", "Woody (Toy Story)",
            "Lightning McQueen (Cars)", "Mater (Cars)",
            "Nemo (Findet Nemo)", "Dory (Findet Nemo)",
            "Po (Kung Fu Panda)", "Kung Fu Panda (Kung Fu Panda)",
            "Alex (Madagascar)", "King Julien (Madagascar)",

            "Mickey Mouse (Disney)", "Donald Duck (Disney)", "Goofy (Disney)",
            "Barbie (Barbie)", "Tinkerbell (Peter Pan)", "Peter Pan (Peter Pan)",

            "WALL-E (WALL-E)", "Baymax (Baymax)",
            "Mr. Incredible (Die Unglaublichen)", "Elastigirl (Die Unglaublichen)",
            "Jack-Jack (Die Unglaublichen)", "Frozone (Die Unglaublichen)",],
            memes: ["John Pork", "Tim Cheese", "EmirMono", "Tasse Kaffee", "Is ts tuff?", "Phonk", "veiny ahh dih", "italian brainrot", "hirnschimmel"],
            geographie: ["Deutschland", "Frankreich", "Italien", "Spanien", "England", "USA", "Kanada", "China", "Russland", "Australien",
            "Brasilien", "Indien", "Türkei", "Japan", "Afrika", "Europa", "Asien", "New York", "Berlin", "Paris",
            "Rom", "London", "Madrid", "München", "Hamburg", "Köln", "Frankfurt", "Los Angeles", "Hollywood", "Tokio",
            "Sydney", "Istanbul", "Ägypten", "Kairo", "Mexiko", "Dubai", "Las Vegas", "Barcelona", "Wien", "Amsterdam",
            "Europa-Park", "Alpen", "Meer", "Wald", "Berg", "Fluss", "See", "Insel", "Strand", "Sahara",
            "Nordpol", "Südpol", "Erde", "Welt", "Planet", "Stadt", "Dorf", "Land", "Gebirge", "Tal",
            "Rhein", "Donau", "Elbe", "Zugspitze", "Mount Everest", "Eiffelturm", "Big Ben", "Brandenburger Tor", "Freiheitsstatue", "Pyramide",
            "Europa", "Nordamerika", "Südamerika", "Afrika", "Asien", "Australien", "Antarktis", "Wolkenkratzer", "Hügel", "Schloss"],
            deutschland: ["Bier", "Brezel", "Wurst", "Schnitzel", "Döner", "Käsekuchen", "Apfelstrudel", "Brötchen", "Schule", "Abitur",
            "Polizei", "Feuerwehr", "Hilf mir! - TV Sendung", "Tagesschau", "Aldi", "Lidl", "Rewe", "Edeka", "MediaMarkt", "Bahn",
            "Autobahn", "Zug", "ICE", "Fußball", "Tor", "Stadion", "WM", "Oktoberfest", "Dirndl", "Lederhose",
            "Berlin", "München", "Hamburg", "Köln", "Frankfurt", "Brandenburger Tor", "Zugspitze", "Schloss Neuschwanstein", "Bayern", "Nordsee",
            "Ostsee", "Alpen", "Adidas", "Puma", "BMW", "Mercedes", "Audi", "Volkswagen", "Currywurst", "Haribo",
            "Nivea", "Nutella", "Ritter Sport", "Playmobil", "Lego", "Kinder Schokolade", "Sparkasse", "Volksbank", "FC Bayern", "BVB",
            "Thomas Müller", "Neuer", "Helene Fischer", "Rammstein", "Mark Forster", "Talahohns", "AfD", "CDU-CSU", "SPD", "FDP", "Die Grünen", "Die LINKE", "Bundestag", "Olaf Abi", "Döner"]
        };
        
        // DOM-Elemente
        const homeScreen = document.getElementById("homeScreen");
        const cardScreen = document.getElementById("cardScreen");
        const gameScreen = document.getElementById("gameScreen");
        const playerCard = document.getElementById("playerCard");
        const cardContent = document.getElementById("cardContent");
        const playerNameElement = document.getElementById("playerName");
        const roleInfoElement = document.getElementById("roleInfo");
        const wordInfoElement = document.getElementById("wordInfo");
        const playerWordElement = document.getElementById("playerWord");
        const playerNamesList = document.getElementById("playerNamesList");
        const playerCounter = document.getElementById("playerCounter");
        const customWordsText = document.getElementById("customWordsText");
        const wordCountInfo = document.getElementById("wordCountInfo");
        
        // Event-Handler hinzufügen
        document.getElementById("addPlayerBtn").addEventListener("click", addPlayerField);
        document.getElementById("removePlayerBtn").addEventListener("click", removePlayerField);
        document.getElementById("wordSource").addEventListener("change", toggleWordSource);
        document.getElementById("customWordsText").addEventListener("input", updateWordCount);
        document.getElementById("startGameBtn").addEventListener("click", prepareGame);
        document.getElementById("playerCard").addEventListener("click", revealCard);
        document.getElementById("nextCardBtn").addEventListener("click", showNextCard);
        document.getElementById("endGameBtn").addEventListener("click", endGame);
        document.getElementById("restartGameBtn").addEventListener("click", restartGame);
        
        // Initialisierung beim Laden
        window.addEventListener('DOMContentLoaded', function() {
            // Füge standardmäßig 3 Spielerfelder hinzu
            for (let i = 0; i < 3; i++) {
                addPlayerField();
            }
        });
        
        // Funktionen für Spielerverwaltung
        function addPlayerField() {
            const playerCount = document.querySelectorAll(".player-input").length;
            const errorPlayerCount = document.getElementById("errorPlayerCount");
            
            // Maximale Spieleranzahl prüfen
            if (playerCount >= 15) {
                errorPlayerCount.textContent = "Es sind maximal 15 Spieler erlaubt!";
                errorPlayerCount.style.display = "block";
                return;
            }
            
            errorPlayerCount.style.display = "none";
            
            const playerInput = document.createElement("div");
            playerInput.className = "player-input";
            
            const input = document.createElement("input");
            input.type = "text";
            input.placeholder = `Spieler ${playerCount + 1}`;
            input.required = true;
            input.className = "player-name-input";
            
            playerInput.appendChild(input);
            playerNamesList.appendChild(playerInput);
            
            updatePlayerCounter();
            updateImpostorOptions();
        }
        
        function removePlayerField() {
            const playerInputs = document.querySelectorAll(".player-input");
            const errorPlayerCount = document.getElementById("errorPlayerCount");
            
            if (playerInputs.length <= 3) {
                errorPlayerCount.textContent = "Es müssen mindestens 3 Spieler vorhanden sein!";
                errorPlayerCount.style.display = "block";
                return;
            }
            
            errorPlayerCount.style.display = "none";
            playerNamesList.removeChild(playerInputs[playerInputs.length - 1]);
            
            updatePlayerCounter();
            updateImpostorOptions();
        }
        
        function updatePlayerCounter() {
            const playerCount = document.querySelectorAll(".player-input").length;
            playerCounter.textContent = `${playerCount} Spieler`;
        }
        
        function updateImpostorOptions() {
            const playerCount = document.querySelectorAll(".player-input").length;
            const impostorOptions = document.getElementById("impostorOptions");
            const select = document.createElement("select");
            select.id = "impostorCount";
            
            // Impostor-Auswahllogik basierend auf Spieleranzahl gemäß neuer Regeln
            let maxImpostors = 1;
            if (playerCount >= 10) {
                maxImpostors = 5;
            } else if (playerCount >= 8) {
                maxImpostors = 4;
            } else if (playerCount >= 6) {
                maxImpostors = 3;
            } else if (playerCount >= 4) {
                maxImpostors = 2;
            }
            
            for (let i = 1; i <= maxImpostors; i++) {
                const option = document.createElement("option");
                option.value = i;
                option.textContent = `${i} Imposter`;
                select.appendChild(option);
            }
            
            impostorOptions.innerHTML = '';
            impostorOptions.appendChild(select);
        }
        
        // Funktionen für Wortverwaltung
        function toggleWordSource() {
            const wordSource = document.getElementById("wordSource").value;
            const themeDiv = document.getElementById("themeDiv");
            const wordSetupDiv = document.getElementById("wordSetupDiv");
            
            if (wordSource === "theme") {
                themeDiv.style.display = "block";
                wordSetupDiv.style.display = "none";
            } else {
                themeDiv.style.display = "none";
                wordSetupDiv.style.display = "block";
                updateWordCount();
            }
        }
        
        function updateWordCount() {
            const wordsText = customWordsText.value;
            const words = parseCustomWords(wordsText);
            wordCountInfo.textContent = `${words.length} Wörter eingegeben`;
        }
        
        function parseCustomWords(text) {
            if (!text.trim()) return [];
            
            // Zerlege den Text in Wörter durch Kommas
            const rawWords = text.split(',');
            
            // Filtere leere Einträge und trimme Leerzeichen
            const validWords = rawWords
                .map(word => word.trim())
                .filter(word => word.length > 0);
                
            return validWords;
        }
        
        function prepareGame() {
            // Spielernamen sammeln
            const playerInputs = document.querySelectorAll(".player-name-input");
            const errorPlayerCount = document.getElementById("errorPlayerCount");
            players = [];
            
            let emptyNameFound = false;
            for (let i = 0; i < playerInputs.length; i++) {
                const input = playerInputs[i];
                let playerName = input.value.trim();
                
                // Wenn Feld leer ist, nimm den Standardnamen des Feldes
                if (playerName === "") {
                    playerName = `Spieler ${i + 1}`;
                }
                
                players.push(playerName);
            }
            
            errorPlayerCount.style.display = "none";
            
            if (players.length < 3) {
                errorPlayerCount.textContent = "Es müssen mindestens 3 Spieler sein!";
                errorPlayerCount.style.display = "block";
                return;
            }
            
            // Impostors-Anzahl auslesen
            const impostorCount = parseInt(document.getElementById("impostorCount").value);
            
            // Wörter festlegen
            const wordSource = document.getElementById("wordSource").value;
            const errorCustomWords = document.getElementById("errorCustomWords");
            let availableWords = [];
            
            if (wordSource === "theme") {
                const selectedTheme = document.getElementById("theme").value;
                availableWords = [...themeWords[selectedTheme]];
            } else {
                const customWordsRaw = customWordsText.value;
                availableWords = parseCustomWords(customWordsRaw);
                
                if (availableWords.length < 1) {
                    errorCustomWords.textContent = "Bitte mindestens ein Wort eingeben!";
                    errorCustomWords.style.display = "block";
                    return;
                } else {
                    errorCustomWords.style.display = "none";
                }
            }
            
            // Normales Wort auswählen
            normalWord = availableWords[Math.floor(Math.random() * availableWords.length)];
            
            // Impostors zufällig auswählen
            impostors = [];
            const playersCopy = [...players];
            
            for (let i = 0; i < impostorCount; i++) {
                if (playersCopy.length === 0) break; // Sicherheitscheck
                const randomIndex = Math.floor(Math.random() * playersCopy.length);
                impostors.push(playersCopy[randomIndex]);
                playersCopy.splice(randomIndex, 1);
            }
            
            // Zum Kartenbildschirm wechseln
            homeScreen.style.display = "none";
            cardScreen.style.display = "block";
            gameScreen.style.display = "none";
            
            // Erste Karte anzeigen
            currentPlayerIndex = 0;
            showPlayerCard();
        }
        
        function showPlayerCard() {
            cardContent.style.display = "none";
            
            if (currentPlayerIndex < players.length) {
                const player = players[currentPlayerIndex];
                playerNameElement.textContent = player;
                
                // Prüfe, ob der Spieler ein Impostor ist
                const isImpostor = impostors.includes(player);
                
                if (isImpostor) {
                    roleInfoElement.textContent = "Du bist der IMPOSTOR!";
                    roleInfoElement.className = "game-text impostor-role";
                    playerWordElement.textContent = "???";
                    playerWordElement.style.display = "inline";
                } else {
                    roleInfoElement.textContent = "Du bist ein normaler Spieler";
                    roleInfoElement.className = "game-text normal-role";
                    playerWordElement.textContent = normalWord;
                    playerWordElement.style.display = "inline";
                }
                
                // Prüfen ob es die letzte Karte ist und Button entsprechend anpassen
                const nextCardBtn = document.getElementById("nextCardBtn");
                
                if (currentPlayerIndex === players.length - 1) {
                    nextCardBtn.textContent = "Spiel starten";
                    nextCardBtn.classList.add("btn-large");
                } else {
                    nextCardBtn.textContent = "Nächste Karte";
                    nextCardBtn.classList.remove("btn-large");
                }
                
                nextCardBtn.style.display = "block";
            } else {
                // Alle Spieler haben ihre Karten gesehen, zum Spielbildschirm wechseln
                cardScreen.style.display = "none";
                gameScreen.style.display = "block";
            }
        }
        
        function revealCard() {
            cardContent.style.display = "block";
        }
        
        function showNextCard() {
            currentPlayerIndex++;
            showPlayerCard();
        }
        
        function endGame() {
            // Zum Startbildschirm zurückkehren
            homeScreen.style.display = "block";
            gameScreen.style.display = "none";
        }
        
        function restartGame() {
            // Spiel mit denselben Spielern neu starten
            prepareGame();
        }
    </script>
</body>
</html>